{
    "databaseChangeLog": [{
        "changeSet": {
            "id": "initial-schema",
            "author": "brettmeyer",
            "changes": [{
                "createTable": {
                    "tableName": "users",
                    "columns": [{
                        "column": {
                            "name": "id",
                            "type": "int",
                            "autoIncrement": true,
                            "constraints": [{
                                "primaryKey": true,
                                "nullable": false
                            }]
                        }
                    }, {
                        "column": {
                            "name": "user_name",
                            "type": "varchar(255)",
                            "constraints": [{
                                "unique": true,
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "password",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "first_name",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "middle_name",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "last_name",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "email_address",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "phone",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "address",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "city",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "state",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "zip_code",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "country",
                            "type": "varchar(255)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "created_at",
                            "type": "datetime",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "updated_at",
                            "type": "datetime",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }]
                }
            }]
        }
    }, {
        "changeSet": {
            "id": "initial-user-data",
            "author": "brettmeyer",
            "changes": [{
                "loadData": {
                    "tableName": "users",
                    "file": "db/data/users.csv",
                    "quotchar": "\""
                }
            }]
        }
    }, {
        "changeSet": {
            "id": "enabled-users",
            "author": "brettmeyer",
            "changes": [{
                "addColumn": {
                    "tableName": "users",
                    "columns": [{
                        "column": {
                            "name": "enabled",
                            "type": "tinyint",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }]
                },
                "update": {
                      "tableName": "users",
                    "columns": [{
                        "column": {
                            "name": "enabled",
                            "value": 1
                        }
                    }]
                }
            }]
        }
    }, {
        "changeSet": {
            "id": "audit-info",
            "author": "brettmeyer",
            "changes": [{
                "addColumn": {
                    "tableName": "users",
                    "columns": [{
                        "column": {
                            "name": "created_by_id",
                            "type": "int(11)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }, {
                        "column": {
                            "name": "updated_by_id",
                            "type": "int(11)",
                            "constraints": [{
                                "nullable": true
                            }]
                        }
                    }]
                }
            }, {
                "addForeignKeyConstraint": {
                    "baseTableName": "users",
                    "baseColumnNames": "created_by_id",
                    "constraintName": "fk_created_by_users",
                    "referencedColumnNames": "id",
                    "referencedTableName": "users",
                    "onDelete": "CASCADE",
                    "onUpdate": "CASCADE"
                }
            }, {
                "addForeignKeyConstraint": {
                    "baseTableName": "users",
                    "baseColumnNames": "updated_by_id",
                    "constraintName": "fk_updated_by_users",
                    "referencedColumnNames": "id",
                    "referencedTableName": "users",
                    "onDelete": "CASCADE",
                    "onUpdate": "CASCADE"
                }
            }]
        }
    }, {
        "changeSet": {
            "id": "uuids",
            "author": "brettmeyer",
            "changes": [{
                "delete": {
                    "tableName": "users"
                }
            }, {
                "dropForeignKeyConstraint": {
                    "baseTableName": "users",
                    "constraintName": "fk_created_by_users"
                }
            }, {
                "dropForeignKeyConstraint": {
                    "baseTableName": "users",
                    "constraintName": "fk_updated_by_users"
                }
            }, {
                "modifyDataType": {
                    "tableName": "users",
                    "columnName": "id",
                    "newDataType": "BINARY(16)",
                    "autoIncrement": false,
                    "constraints": [{
                        "nullable": true
                    }]
                }
            }, {
                "dropDefaultValue": {
                    "tableName": "users",
                    "columnName": "id"
                }
            }, {
                "modifyDataType": {
                    "tableName": "users",
                    "columnName": "created_by_id",
                    "newDataType": "BINARY(16)",
                    "defaultValue": ""
                }
            }, {
                "modifyDataType": {
                    "tableName": "users",
                    "columnName": "updated_by_id",
                    "newDataType": "BINARY(16)"
                }
            }, {
                "addForeignKeyConstraint": {
                    "baseTableName": "users",
                    "baseColumnNames": "created_by_id",
                    "constraintName": "fk_created_by_users",
                    "referencedColumnNames": "id",
                    "referencedTableName": "users",
                    "onDelete": "CASCADE",
                    "onUpdate": "CASCADE"
                }
            }, {
                "addForeignKeyConstraint": {
                    "baseTableName": "users",
                    "baseColumnNames": "updated_by_id",
                    "constraintName": "fk_updated_by_users",
                    "referencedColumnNames": "id",
                    "referencedTableName": "users",
                    "onDelete": "CASCADE",
                    "onUpdate": "CASCADE"
                }
            }]
        }
     }, {
        "changeSet": {
            "id": "uuid-users",
            "author": "brettmeyer",
            "changes": [{
                "loadData": {
                    "tableName": "users",
                    "file": "db/data/users-uuid.csv",
                    "quotchar": "\"",
                    "columns": [{
                        "name": "id",
                        "type": "COMPUTED"
                    }]
                }
            }]
        }
     }, {
        "changeSet": {
            "id": "user-list",
            "author": "brettmeyer",
            "changes": [{
                "loadData": {
                    "tableName": "users",
                    "file": "db/data/user-list.csv",
                    "quotchar": "\"",
                    "columns": [{
                        "name": "id",
                        "type": "COMPUTED"
                    }]
                }
            }]
        }
    }]
}
